<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImageIn - AI Image Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f3e8ff 50%, #dbeafe 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header Styles */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: #6b7280;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #8b5cf6;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-outline {
            border: 1px solid #e5e7eb;
            background: transparent;
            color: #8b5cf6;
        }

        .btn-outline:hover {
            background: #f3e8ff;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            color: white;
            font-size: 1.1rem;
            padding: 1rem 2rem;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 5rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f3e8ff, #dbeafe);
            color: #8b5cf6;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 2rem;
            animation: fadeInUp 0.6s ease-out;
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: bold;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            animation: fadeInUp 0.6s ease-out 0.2s both;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: #6b7280;
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            animation: fadeInUp 0.6s ease-out 0.4s both;
        }

        /* Generation Interface */
        .generation-section {
            padding: 3rem 1rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .generation-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background: white;
            font-size: 1rem;
            cursor: pointer;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Images Section */
        .images-section {
            padding: 3rem 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .images-title {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .generation-stats {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid #e5e7eb;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .image-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            animation: fadeInUp 0.6s ease-out both;
        }

        .image-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
        }

        .image-container {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
        }

        .generated-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s;
        }

        .image-loading {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #f3e8ff, #dbeafe);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1rem;
        }

        .image-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            opacity: 0;
            transition: all 0.3s;
        }

        .image-card:hover .image-overlay {
            background: rgba(0, 0, 0, 0.2);
            opacity: 1;
        }

        .overlay-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 8px;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .overlay-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        /* Features Section */
        .features-section {
            padding: 5rem 1rem;
            background: linear-gradient(135deg, #f3e8ff, #dbeafe);
        }

        .features-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .features-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 16px;
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .feature-description {
            color: #6b7280;
        }

        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 3rem 1rem;
            text-align: center;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #6b7280;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: #8b5cf6;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spin {
            animation: spin 1s linear infinite;
        }

        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .hero {
                padding: 3rem 1rem;
            }

            .generation-card {
                padding: 1.5rem;
            }

            .images-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Hidden class */
        .hidden {
            display: none;
        }

        /* Loading shimmer effect */
        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        .enhance-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .enhance-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .enhance-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: translateY(-50%);
        }

        .form-input {
            padding-right: 120px; /* Make space for enhance button */
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-image"></i>
                </div>
                <span class="logo-text">ImageIn</span>
            </div>
            <nav class="nav-links">
                <!-- Remove all navigation links -->
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="badge">
            <i class="fas fa-sparkles"></i>
            Powered by Pollination AI
        </div>
        <h1 class="hero-title">
            Transform Words<br>
            Into Visual Magic
        </h1>
        <p class="hero-subtitle">
            Create stunning AI-generated images from your imagination. Generate 4 unique variations instantly with our advanced AI technology.
        </p>
    </section>

    <!-- Generation Interface -->
    <section class="generation-section">
        <div class="generation-card">
            <form id="generateForm">
                <div class="form-group">
                    <label for="prompt" class="form-label">Describe your image</label>
                    <div style="position: relative;">
                        <input 
                            type="text" 
                            id="prompt" 
                            class="form-input" 
                            placeholder="A majestic dragon flying over a mystical forest at sunset..."
                            required
                        >
                        <button 
                            type="button" 
                            id="enhanceBtn" 
                            class="enhance-btn"
                            onclick="enhancePrompt()"
                            title="Enhance your prompt with AI"
                        >
                            <i class="fas fa-magic"></i>
                            Enhance
                        </button>
                    </div>
                </div>

                <div class="controls-grid">
                    <div class="form-group">
                        <label for="aspectRatio" class="form-label">Aspect Ratio</label>
                        <select id="aspectRatio" class="form-select">
                            <option value="1:1">Square (1:1)</option>
                            <option value="4:5">Portrait (4:5)</option>
                            <option value="9:16">Story (9:16)</option>
                            <option value="16:9">Landscape (16:9)</option>
                            <option value="21:9">Ultra Wide (21:9)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="imageStyle" class="form-label">Image Style</label>
                        <select id="imageStyle" class="form-select">
                            <option value="auto">Auto</option>
                            <option value="realistic">Realistic</option>
                            <option value="digital-art">Digital Art</option>
                            <option value="painting">Painting</option>
                            <option value="anime">Anime</option>
                            <option value="3d-render">3D Render</option>
                            <option value="minimalist">Minimalist</option>
                            <option value="black-white">Black & White</option>
                            <option value="sketch">Sketch</option>
                        </select>
                    </div>
                </div>

                <button type="submit" id="generateBtn" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-bolt"></i>
                    Generate 4 Images
                </button>
            </form>
        </div>
    </section>

    <!-- Generated Images Section -->
    <section id="imagesSection" class="images-section hidden">
        <h2 class="images-title">Generated Images</h2>
        
        <div id="generationStats" class="generation-stats"></div>

        <div id="imagesGrid" class="images-grid">
            <!-- Images will be dynamically inserted here -->
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="features-container">
            <h2 class="features-title">Why Choose ImageIn?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="feature-title">Lightning Fast</h3>
                    <p class="feature-description">
                        Generate 4 unique images in seconds with our optimized AI pipeline.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <h3 class="feature-title">Multiple Styles</h3>
                    <p class="feature-description">
                        Choose from 9 different artistic styles to match your vision.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <h3 class="feature-title">Perfect Ratios</h3>
                    <p class="feature-description">
                        Generate images in 5 different aspect ratios for any use case.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-logo">
            <div class="logo-icon">
                <i class="fas fa-image"></i>
            </div>
            <span class="logo-text">ImageIn</span>
        </div>
        <p style="color: #6b7280; margin-bottom: 1rem;">Transform your imagination into stunning visuals</p>
        <div class="footer-links">
            <a href="#privacy">Privacy Policy</a>
            <a href="#terms">Terms of Service</a>
            <a href="#contact">Contact</a>
        </div>
    </footer>

    <script>
        // Global variables
        let isGenerating = false;
        let generationStartTime = null;

        // DOM elements
        const generateForm = document.getElementById('generateForm');
        const generateBtn = document.getElementById('generateBtn');
        const promptInput = document.getElementById('prompt');
        const aspectRatioSelect = document.getElementById('aspectRatio');
        const imageStyleSelect = document.getElementById('imageStyle');
        const imagesSection = document.getElementById('imagesSection');
        const imagesGrid = document.getElementById('imagesGrid');
        const generationStats = document.getElementById('generationStats');

        // Aspect ratio dimensions mapping
        const aspectRatioDimensions = {
            '1:1': { width: 1024, height: 1024 },
            '4:5': { width: 1024, height: 1280 },
            '9:16': { width: 720, height: 1280 },
            '16:9': { width: 1280, height: 720 },
            '21:9': { width: 1344, height: 576 }
        };

        // Form submission handler
        generateForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (isGenerating) return;
            
            const prompt = promptInput.value.trim();
            if (!prompt) return;

            await generateImages();
        });

        // Generate images function
        async function generateImages() {
            isGenerating = true;
            generationStartTime = Date.now();
            
            // Update UI
            updateGenerateButton(true);
            showImagesSection();
            showLoadingCards();
            updateGenerationStats();

            try {
                const prompt = promptInput.value.trim();
                const aspectRatio = aspectRatioSelect.value;
                const imageStyle = imageStyleSelect.value;
                
                // Generate 4 unique images
                const imagePromises = [];
                for (let i = 0; i < 4; i++) {
                    const enhancedPrompt = createEnhancedPrompt(prompt, imageStyle);
                    const seed = Math.floor(Math.random() * 1000000) + i;
                    const dimensions = aspectRatioDimensions[aspectRatio];
                    
                    const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(enhancedPrompt)}?width=${dimensions.width}&height=${dimensions.height}&seed=${seed}&enhance=true&nologo=true`;
                    imagePromises.push(imageUrl);
                }

                // Create image cards
                createImageCards(imagePromises, prompt);
                
            } catch (error) {
                console.error('Error generating images:', error);
                showError('Failed to generate images. Please try again.');
            } finally {
                isGenerating = false;
                updateGenerateButton(false);
                updateGenerationStats();
            }
        }

        // Create enhanced prompt with style
        function createEnhancedPrompt(prompt, style) {
            let enhancedPrompt = prompt;
            
            if (style !== 'auto') {
                const styleMap = {
                    'realistic': 'photorealistic, high quality, detailed',
                    'digital-art': 'digital art style, vibrant colors, detailed',
                    'painting': 'oil painting style, artistic, brushstrokes',
                    'anime': 'anime style, manga, japanese animation',
                    '3d-render': '3D rendered, CGI, high quality render',
                    'minimalist': 'minimalist style, clean, simple',
                    'black-white': 'black and white, monochrome, high contrast',
                    'sketch': 'pencil sketch, hand drawn, artistic sketch'
                };
                
                enhancedPrompt += `, ${styleMap[style]}`;
            }
            
            enhancedPrompt += ', high quality, detailed';
            return enhancedPrompt;
        }

        // Update generate button state
        function updateGenerateButton(loading) {
            if (loading) {
                generateBtn.innerHTML = '<i class="fas fa-spinner spin"></i> Generating Magic...';
                generateBtn.disabled = true;
            } else {
                generateBtn.innerHTML = '<i class="fas fa-bolt"></i> Generate 4 Images';
                generateBtn.disabled = false;
            }
        }

        // Show images section
        function showImagesSection() {
            imagesSection.classList.remove('hidden');
            imagesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Show loading cards
        function showLoadingCards() {
            imagesGrid.innerHTML = '';
            
            for (let i = 0; i < 4; i++) {
                const loadingCard = createLoadingCard();
                imagesGrid.appendChild(loadingCard);
            }
        }

        // Create loading card
        function createLoadingCard() {
            const card = document.createElement('div');
            card.className = 'image-card';
            card.innerHTML = `
                <div class="image-container">
                    <div class="image-loading">
                        <i class="fas fa-spinner spin" style="font-size: 2rem; color: #8b5cf6;"></i>
                        <p style="color: #8b5cf6; font-weight: 500;">Generating...</p>
                    </div>
                </div>
            `;
            return card;
        }

        // Create image cards
        function createImageCards(imageUrls, prompt) {
            imagesGrid.innerHTML = '';
            
            imageUrls.forEach((imageUrl, index) => {
                const card = createImageCard(imageUrl, index, prompt);
                imagesGrid.appendChild(card);
            });
        }

        // Create individual image card
        function createImageCard(imageUrl, index, prompt) {
            const card = document.createElement('div');
            card.className = 'image-card';
            card.style.animationDelay = `${index * 100}ms`;
            
            card.innerHTML = `
                <div class="image-container">
                    <div class="image-loading">
                        <i class="fas fa-spinner spin" style="font-size: 1.5rem; color: #8b5cf6;"></i>
                        <p style="color: #8b5cf6; font-size: 0.9rem;">Loading...</p>
                    </div>
                    <img 
                        class="generated-image" 
                        src="${imageUrl}" 
                        alt="Generated image ${index + 1}: ${prompt}"
                        style="opacity: 0;"
                        onload="handleImageLoad(this)"
                        onerror="handleImageError(this)"
                    >
                    <div class="image-overlay">
                        <button class="overlay-btn" onclick="downloadImage('${imageUrl}', ${index})" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="overlay-btn" onclick="likeImage(${index})" title="Like">
                            <i class="fas fa-heart"></i>
                        </button>
                        <button class="overlay-btn" onclick="shareImage('${imageUrl}', '${prompt}')" title="Share">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Handle image load
        function handleImageLoad(img) {
            const loadingDiv = img.parentElement.querySelector('.image-loading');
            if (loadingDiv) {
                loadingDiv.style.display = 'none';
            }
            img.style.opacity = '1';
        }

        // Handle image error
        function handleImageError(img) {
            const loadingDiv = img.parentElement.querySelector('.image-loading');
            if (loadingDiv) {
                loadingDiv.innerHTML = `
                    <i class="fas fa-exclamation-triangle" style="font-size: 1.5rem; color: #ef4444;"></i>
                    <p style="color: #ef4444; font-size: 0.9rem;">Failed to load</p>
                    <button class="btn btn-outline" style="margin-top: 0.5rem; font-size: 0.8rem;" onclick="retryImage(this)">
                        Retry
                    </button>
                `;
            }
        }

        // Retry image loading
        function retryImage(button) {
            const card = button.closest('.image-card');
            const img = card.querySelector('.generated-image');
            const loadingDiv = card.querySelector('.image-loading');
            
            loadingDiv.innerHTML = `
                <i class="fas fa-spinner spin" style="font-size: 1.5rem; color: #8b5cf6;"></i>
                <p style="color: #8b5cf6; font-size: 0.9rem;">Loading...</p>
            `;
            
            // Force reload the image
            const currentSrc = img.src;
            img.src = '';
            img.src = currentSrc;
        }

        // Download image
        async function downloadImage(imageUrl, index) {
            try {
                const response = await fetch(imageUrl);
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `imagein-${Date.now()}-${index + 1}.png`;
                document.body.appendChild(a);
                a.click();
                
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
            } catch (error) {
                console.error('Download failed:', error);
                alert('Download failed. Please try again.');
            }
        }

        // Like image
        function likeImage(index) {
            // Add visual feedback
            const button = event.target.closest('.overlay-btn');
            button.style.color = '#ef4444';
            button.innerHTML = '<i class="fas fa-heart"></i>';
            
            // You can add actual like functionality here
            console.log(`Liked image ${index + 1}`);
        }

        // Share image
        async function shareImage(imageUrl, prompt) {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Check out this AI-generated image!',
                        text: `Generated with ImageIn: "${prompt}"`,
                        url: imageUrl
                    });
                } catch (error) {
                    console.error('Share failed:', error);
                }
            } else {
                // Fallback: copy to clipboard
                try {
                    await navigator.clipboard.writeText(imageUrl);
                    alert('Image URL copied to clipboard!');
                } catch (error) {
                    console.error('Copy failed:', error);
                    alert('Sharing not supported on this device.');
                }
            }
        }

        // Update generation stats
        function updateGenerationStats() {
            const prompt = promptInput.value.trim();
            const aspectRatio = aspectRatioSelect.value;
            const imageStyle = imageStyleSelect.value;
            
            if (!prompt && !isGenerating) {
                generationStats.innerHTML = '';
                return;
            }

            let statsHTML = `
                <div class="stat-badge">
                    <i class="fas fa-palette"></i>
                    ${imageStyle === 'auto' ? 'Auto Style' : imageStyle.replace('-', ' ')}
                </div>
                <div class="stat-badge">
                    <i class="fas fa-expand-arrows-alt"></i>
                    ${aspectRatio}
                </div>
            `;

            if (!isGenerating && generationStartTime) {
                const generationTime = Math.round((Date.now() - generationStartTime) / 1000);
                statsHTML += `
                    <div class="stat-badge">
                        <i class="fas fa-clock"></i>
                        ${generationTime}s
                    </div>
                `;
            }

            generationStats.innerHTML = statsHTML;
        }

        // Show error message
        function showError(message) {
            imagesGrid.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: #ef4444;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                    <p>${message}</p>
                </div>
            `;
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add some example prompts for inspiration
        const examplePrompts = [
            "A majestic dragon flying over a mystical forest at sunset",
            "Cyberpunk city with neon lights reflecting on wet streets",
            "Peaceful zen garden with cherry blossoms and koi pond",
            "Space explorer discovering an alien planet with purple skies",
            "Cozy coffee shop on a rainy day with warm lighting",
            "Underwater coral reef with colorful tropical fish",
            "Medieval castle on a cliff overlooking the ocean",
            "Futuristic robot in a field of wildflowers"
        ];

        // Add placeholder cycling for inspiration
        let placeholderIndex = 0;
        setInterval(() => {
            if (!promptInput.value) {
                promptInput.placeholder = examplePrompts[placeholderIndex];
                placeholderIndex = (placeholderIndex + 1) % examplePrompts.length;
            }
        }, 3000);

        // Enhance prompt using Gemini API
        async function enhancePrompt() {
            const promptInput = document.getElementById('prompt');
            const enhanceBtn = document.getElementById('enhanceBtn');
            const currentPrompt = promptInput.value.trim();
            
            if (!currentPrompt) {
                alert('Please enter a prompt first');
                return;
            }
            
            // Update button state
            enhanceBtn.disabled = true;
            enhanceBtn.innerHTML = '<i class="fas fa-spinner spin"></i> Enhancing...';
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=AIzaSyCT_hRShR7x-luU4bMCNCTj9vunETcOqGk`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Enhance this image generation prompt to be more detailed, creative, and visually descriptive. Keep the core concept but add artistic details, lighting, composition, and style elements that would make for a stunning AI-generated image. Make it concise but rich in visual details.

Original prompt: "${currentPrompt}"

Enhanced prompt:`
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 200,
                        }
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    const enhancedPrompt = data.candidates[0].content.parts[0].text.trim();
                    promptInput.value = enhancedPrompt;
                    
                    // Add visual feedback
                    promptInput.style.borderColor = '#10b981';
                    promptInput.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
                    setTimeout(() => {
                        promptInput.style.borderColor = '#8b5cf6';
                        promptInput.style.boxShadow = '0 0 0 3px rgba(139, 92, 246, 0.1)';
                    }, 2000);
                } else {
                    throw new Error('No enhanced prompt received');
                }
                
            } catch (error) {
                console.error('Error enhancing prompt:', error);
                alert('Failed to enhance prompt. Please try again.');
            } finally {
                // Reset button state
                enhanceBtn.disabled = false;
                enhanceBtn.innerHTML = '<i class="fas fa-magic"></i> Enhance';
            }
        }
    </script>
</body>
</html>
